# Docker Compose override for using local Ollama installation
# This file excludes the Ollama service when a local installation is detected

services:
  # Remove Ollama service entirely when using local installation
  ollama:
    deploy:
      replicas: 0
    
  # Update services to use host network for Ollama access
  api-gateway:
    environment:
      - OLLAMA_URL=http://host.docker.internal:11434
    extra_hosts:
      - "host.docker.internal:host-gateway"
  
  analyzer-service:
    environment:
      - OLLAMA_URL=http://host.docker.internal:11434
    extra_hosts:
      - "host.docker.internal:host-gateway"
  
  clustering-service:
    environment:
      - OLLAMA_URL=http://host.docker.internal:11434
    extra_hosts:
      - "host.docker.internal:host-gateway"
  
  chatbot-service:
    environment:
      - OLLAMA_BASE_URL=http://host.docker.internal:11434
    extra_hosts:
      - "host.docker.internal:host-gateway"